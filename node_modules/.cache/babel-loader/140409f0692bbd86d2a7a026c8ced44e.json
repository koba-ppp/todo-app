{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/kobayashiteppei/Desktop/react_firebase_typescript_todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kobayashiteppei/Desktop/react_firebase_typescript_todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/kobayashiteppei/Desktop/react_firebase_typescript_todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import styles from\"./login.module.css\";import{Button,FormControl,TextField,Typography}from\"@material-ui/core\";import{auth}from\"./firebase\";var Login=function Login(props){//routerのhistoryという属性にアクセスすることができる。ページの履歴を記録してる。\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];//ログインしている時はtrue,してない時はfalse\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];//emailを入力してもらうときのステイト\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];useEffect(function(){var unSub=auth.onAuthStateChanged(function(user){if(user){props.history.push(\"/\");};return function(){return unSub();};});//ログイン関係に変化があった時にその都度呼び出されるメソッド\n},[props.history]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.login__root,children:[/*#__PURE__*/_jsx(\"h1\",{children:isLogin?\"Login\":\"Register\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(FormControl,{children:/*#__PURE__*/_jsx(TextField,{InputLabelProps:{shrink:true},name:\"email\",label:\"E-mail\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(FormControl,{children:/*#__PURE__*/_jsx(TextField,{InputLabelProps:{shrink:true},name:\"password\",label:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",size:\"small\",onClick:isLogin?/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return auth.signInWithEmailAndPassword(email,password);case 3:props.history.push(\"/\");_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);alert(_context.t0.message);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);})):/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return auth.createUserWithEmailAndPassword(email,password);case 3:props.history.push(\"/\");_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);alert(_context2.t0.message);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);})),children:isLogin?\"login\":\"register\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Typography,{align:\"center\",children:/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setIsLogin(!isLogin);},children:isLogin?\"Create new account ?\":\"Back to login\"})})]});};export default Login;","map":{"version":3,"sources":["/Users/kobayashiteppei/Desktop/react_firebase_typescript_todo/src/Login.tsx"],"names":["React","useState","useEffect","styles","Button","FormControl","TextField","Typography","auth","Login","props","isLogin","setIsLogin","email","setEmail","password","setPassword","unSub","onAuthStateChanged","user","history","push","login__root","shrink","e","target","value","signInWithEmailAndPassword","alert","message","createUserWithEmailAndPassword"],"mappings":"inBAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAwBC,SAAxB,KAAwC,OAAxC,CACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CACA,OAAQC,MAAR,CAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,UAAxC,KAAyD,mBAAzD,CACA,OAAQC,IAAR,KAAmB,YAAnB,CAEA,GAAMC,CAAAA,KAAc,CAAG,QAAjBA,CAAAA,KAAiB,CAACC,KAAD,CAAgB,CACnC;AADmC,cAGLT,QAAQ,CAAC,IAAD,CAHH,wCAG5BU,OAH4B,eAGnBC,UAHmB,eAGW;AAHX,eAITX,QAAQ,CAAC,EAAD,CAJC,yCAI5BY,KAJ4B,eAIrBC,QAJqB,eAIK;AAJL,eAKHb,QAAQ,CAAC,EAAD,CALL,yCAK5Bc,QAL4B,eAKlBC,WALkB,eAQnCd,SAAS,CAAC,UAAK,CACX,GAAMe,CAAAA,KAAK,CAAGT,IAAI,CAACU,kBAAL,CAAwB,SAACC,IAAD,CAAU,CAC5C,GAAGA,IAAH,CAAQ,CACJT,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACH,EACD,MAAO,kBAAMJ,CAAAA,KAAK,EAAX,EAAP,CACH,CALa,CAAd,CAKO;AACV,CAPQ,CAOP,CAACP,KAAK,CAACU,OAAP,CAPO,CAAT,CASA,mBACI,aAAK,SAAS,CAAEjB,MAAM,CAACmB,WAAvB,wBACI,oBAAKX,OAAO,CAAG,OAAH,CAAa,UAAzB,EADJ,cAEI,aAFJ,cAGI,KAAC,WAAD,wBACI,KAAC,SAAD,EACA,eAAe,CAAE,CACbY,MAAM,CAAE,IADK,CADjB,CAIA,IAAI,CAAC,OAJL,CAKA,KAAK,CAAC,QALN,CAMA,KAAK,CAAEV,KANP,CAOA,QAAQ,CAAE,kBAACW,CAAD,QAA4CV,CAAAA,QAAQ,CAACU,CAAC,CAACC,MAAF,CAASC,KAAV,CAApD,EAPV,EADJ,EAHJ,cAcI,aAdJ,cAeI,KAAC,WAAD,wBACI,KAAC,SAAD,EACA,eAAe,CAAE,CACbH,MAAM,CAAE,IADK,CADjB,CAIA,IAAI,CAAC,UAJL,CAKA,KAAK,CAAC,UALN,CAMA,KAAK,CAAER,QANP,CAOA,QAAQ,CAAE,kBAACS,CAAD,QAA4CR,CAAAA,WAAW,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAV,CAAvD,EAPV,EADJ,EAfJ,cA0BI,aA1BJ,cA2BI,KAAC,MAAD,EACI,OAAO,CAAC,WADZ,CAEI,KAAK,CAAC,SAFV,CAGI,IAAI,CAAC,OAHT,CAII,OAAO,CACHf,OAAO,sEACD,yKAEYH,CAAAA,IAAI,CAACmB,0BAAL,CAAgCd,KAAhC,CAAuCE,QAAvC,CAFZ,QAGML,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EAHN,8EAKMO,KAAK,CAAC,YAAMC,OAAP,CAAL,CALN,mEADC,wEASD,gLAEYrB,CAAAA,IAAI,CAACsB,8BAAL,CAAoCjB,KAApC,CAA0CE,QAA1C,CAFZ,QAGML,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EAHN,kFAKMO,KAAK,CAAC,aAAMC,OAAP,CAAL,CALN,qEATC,EALf,UAwBKlB,OAAO,CAAG,OAAH,CAAa,UAxBzB,EA3BJ,cAqDI,aArDJ,cAsDI,KAAC,UAAD,EAAY,KAAK,CAAC,QAAlB,uBACI,aAAM,OAAO,CAAE,yBAAMC,CAAAA,UAAU,CAAC,CAACD,OAAF,CAAhB,EAAf,UACKA,OAAO,CAAG,sBAAH,CAA4B,eADxC,EADJ,EAtDJ,GADJ,CA8DH,CA/ED,CAiFA,cAAeF,CAAAA,KAAf","sourcesContent":["import React,{useState, useEffect} from 'react';\nimport styles from \"./login.module.css\";\nimport {Button, FormControl, TextField, Typography} from \"@material-ui/core\";\nimport {auth} from \"./firebase\";\n\nconst Login:React.FC = (props: any) => {\n    //routerのhistoryという属性にアクセスすることができる。ページの履歴を記録してる。\n\n    const [isLogin, setIsLogin] = useState(true); //ログインしている時はtrue,してない時はfalse\n    const [email, setEmail] = useState(\"\"); //emailを入力してもらうときのステイト\n    const [password, setPassword] = useState(\"\");\n\n\n    useEffect(()=> {\n        const unSub = auth.onAuthStateChanged((user) => {\n            if(user){\n                props.history.push(\"/\");\n            };\n            return () => unSub();\n        });    //ログイン関係に変化があった時にその都度呼び出されるメソッド\n    },[props.history])\n\n    return (\n        <div className={styles.login__root}>\n            <h1>{isLogin ? \"Login\" : \"Register\"}</h1>\n            <br/>\n            <FormControl>\n                <TextField \n                InputLabelProps={{\n                    shrink: true,\n                }}\n                name=\"email\"\n                label=\"E-mail\"\n                value={email}\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) => setEmail(e.target.value)}\n                />\n            </FormControl>\n            <br/>\n            <FormControl>\n                <TextField \n                InputLabelProps={{\n                    shrink: true,\n                }}\n                name=\"password\"\n                label=\"Password\"\n                value={password}\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) => setPassword(e.target.value)}\n                />\n            </FormControl>\n            <br/>\n            <Button \n                variant=\"contained\" \n                color=\"primary\" \n                size=\"small\"\n                onClick={\n                    isLogin \n                        ? async () => {\n                            try{\n                                await auth.signInWithEmailAndPassword(email, password);\n                                props.history.push(\"/\")\n                            }catch(error){\n                                alert(error.message)\n                            } \n                        }\n                        : async () => {\n                            try{\n                                await auth.createUserWithEmailAndPassword(email,password);\n                                props.history.push(\"/\")\n                            }catch(error){\n                                alert(error.message);\n                            }\n                        }\n                }\n            >\n                {isLogin ? \"login\" : \"register\"}\n            </Button>\n            <br/>\n            <Typography align=\"center\">\n                <span onClick={() => setIsLogin(!isLogin)}>\n                    {isLogin ? \"Create new account ?\" : \"Back to login\"}\n                </span>\n            </Typography>\n        </div>\n    )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}